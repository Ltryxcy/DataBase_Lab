{% extends "myBankSystem/base.html" %}
{% load Bulma %}

{% block page_header %}
<section class="hero is-info">
  <div class="hero-body">
    <div class="container">
      <h1 class="title" align="center">账户信息</h1>
      <h2 class="subtitle" align="center">
        身份证号码：{{ account_user.id }}，
        客户名：{{ account_user.name }}，
        电话：{{ account_user.tel }}，
        家庭住址：{{ account_user.address }}，
        账户数量：{{ account_user.counts }}，
        账户状态：{{ account_user.status }}
      </h2>
    </div>
  </div>
</section>
{% endblock page_header %}

{% block content %}
<div class="container">
  <div class="columns is-multiline">
    {% for account in accounts %}
    <div class="column is-half">
      <div class="card">
        <header class="card-header">
          <p class="card-header-title">
            卡号：{{ account.account_id }}
          </p>
          <a href="{% url 'accounts:delete_account' account.account_id %}" class="card-header-icon" aria-label="删除账户">
            <span class="icon">
              <i class="fas fa-trash-alt" aria-hidden="true"></i>
            </span>
          </a>
        </header>
        <div class="card-content">
          <div class="content">
            <p>持有人：{{ account.user.name }}</p>
            <p>余额：{{ account.money|floatformat:2 }}元</p>
            <p>开户银行名称：{{ account.branch.name }}</p>
            <p>开户时间：{{ account.create_date|date:'Y-m-d, H:i' }}</p>
          </div>
        </div>
        <footer class="card-footer">
          <a href="{% url 'accounts:transfer' account.account_id %}" class="card-footer-item">转账</a>
          <a href="{% url 'bills:create_bill' account.account_id %}" class="card-footer-item">创建账单</a>
          <a href="{% url 'bills:bills' account.account_id %}" class="card-footer-item">账单详情</a>
        </footer>
      </div>
    </div>
    {% endfor %}
  </div>

  <nav class="pagination is-centered" role="navigation" aria-label="pagination">
    {% if accounts.has_previous %}
    <a class="pagination-previous" href="?page=1">&laquo; 1</a>
    <a class="pagination-previous" href="?page={{ accounts.previous_page_number }}">{{ accounts.previous_page_number }}</a>
    {% endif %}
    <a class="pagination-link is-current">{{ accounts.number }}</a>
    {% if accounts.has_next %}
    <a class="pagination-next" href="?page={{ accounts.next_page_number }}">{{ accounts.next_page_number }}</a>
    <a class="pagination-next" href="?page={{ accounts.paginator.num_pages }}">{{ accounts.paginator.num_pages }} &raquo;</a>
    {% endif %}
  </nav>
</div>
{% endblock content %}

{% if messages %}
<script>
  {% for msg in messages %}
  alert('{{ msg.message }}');
  {% endfor %}
</script>
{% endif %}
